<div class="layout">
  <app-header></app-header>
  <section class="page">
    <div class="toolbar">
      <h2>Available Vehicles</h2>
      <a routerLink="/user/bookings" class="nav-link">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
        Book Vehicle
      </a>
    </div>
    <div class="empty" *ngIf="vehicles && vehicles.length === 0">
      <img src="assets/empty-garage.svg" alt="No vehicles" />
      <p>No vehicles found. Try changing filters.</p>
    </div>

    <div class="grid" *ngIf="vehicles.length">
      <article class="card" *ngFor="let v of filteredVehicles">
        <div class="thumb">
          <img
            [src]="getVehicleImage(v)"
            [alt]="v.brand + ' ' + v.model"
            loading="lazy"
          />
          <div class="badge" [class.available]="v.status === 'AVAILABLE'">
            {{ v.status || "N/A" }}
          </div>
        </div>

        <div class="info">
          <h3>
            {{ v.brand }} <span class="model">{{ v.model }}</span>
          </h3>

          <ul class="specs">
            <li>
              <span>Type</span><strong>{{ v.type }}</strong>
            </li>
            <li>
              <span>Fuel</span><strong>{{ v.fuelType }}</strong>
            </li>
            <li>
              <span>Transmission</span><strong>{{ v.transmission }}</strong>
            </li>
            <li>
              <span>Seats</span><strong>{{ v.seat }}</strong>
            </li>
          </ul>

          <div class="price">
            <div class="per">
              <strong>₹{{ v.pricePerDay }}</strong
              ><span>/day</span>
            </div>
            <div class="per alt">
              <strong>₹{{ v.pricePerHour }}</strong
              ><span>/hr</span>
            </div>
          </div>
          <button class="btn" *ngIf="isFiltered" (click)="onBooking(v)">Book</button>

        </div>
      </article>
    </div>
  </section>
  <app-footer></app-footer>
</div>
